name: gitAction

    
on: push
jobs:
    sshConn:
        runs-on: ubuntu-latest
        steps:
            - name: conn to remote ssh server
              uses: appleboy/ssh-action@master
              with:
                host:  ${{secrets.HOST}}
                username: ${{secrets.USERNAME}}
                port: ${{secrets.PORT}}
                key: ${{secrets.SSH}}
                script: whoami
    sftpConn:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v3
            - name: conn with scp proto 
              uses: nicklasfrahm/scp-action@main
              with:
                host: ${{secrets.HOST}}
                username: ${{secrets.USERNAME}}
                key: ${{secrets.SSH}}
                port: ${{secrets.PORT}}
                fingerprint: "SHA256:0kJByUsW4llG7ptvXh3IA5iDOrTUXyxNishCXhcXHIc"
                source: ./
                target: ~/test/a
                direction: upload 
                recursive: true